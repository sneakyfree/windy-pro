<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; connect-src 'self' ws://127.0.0.1:*; media-src 'self' mediastream:;">
  <title>Windy Pro</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div id="app" class="window">
    <!-- Draggable Title Bar -->
    <div class="title-bar" id="titleBar">
      <div class="title-bar-left">
        <span class="logo">ğŸŒªï¸</span>
        <span class="title">Windy Pro</span>
      </div>
      <div class="title-bar-right">
        <button class="title-btn" id="settingsBtn" title="Settings">âš™ï¸</button>
        <button class="title-btn" id="minimizeBtn" title="Minimize">â”€</button>
        <button class="title-btn close" id="closeBtn" title="Close">Ã—</button>
      </div>
    </div>

    <!-- State Indicator (The Green Strobe) -->
    <div class="state-indicator" id="stateIndicator">
      <div class="state-glow" id="stateGlow"></div>
      <div class="state-label" id="stateLabel">Ready</div>
      <span class="session-timer" id="sessionTimer"></span>
    </div>

    <!-- Reconnect Toast -->
    <div class="reconnect-toast" id="reconnectToast" style="display:none;"></div>

    <!-- Audio Level Meter -->
    <div class="audio-meter-container" id="audioMeterContainer" style="display: none;">
      <div class="audio-meter-bar" id="audioMeterBar"></div>
    </div>

    <!-- Transcript Display -->
    <div class="transcript-container" id="transcriptContainer">
      <div class="transcript-scroll" id="transcriptScroll">
        <div class="transcript-content" id="transcriptContent">
          <!-- Transcript segments will appear here -->
          <div class="placeholder">Press <kbd>Ctrl+Shift+Space</kbd> to start recording</div>
        </div>
      </div>
    </div>

    <!-- Control Bar -->
    <div class="control-bar">
      <button class="control-btn primary" id="recordBtn" title="Start/Stop Recording">
        <span class="icon">ğŸ¤</span>
        <span class="label">Record</span>
      </button>
      <button class="control-btn" id="clearBtn" title="Clear Transcript">
        <span class="icon">ğŸ—‘ï¸</span>
      </button>
      <button class="control-btn" id="copyBtn" title="Copy All">
        <span class="icon">ğŸ“‹</span>
      </button>
      <button class="control-btn" id="pasteBtn" title="Paste to Cursor">
        <span class="icon">ğŸ“</span>
      </button>
      <select class="archive-route" id="archiveRouteSelect" title="Today route: where dictations archive today">
        <option value="local">Route: Local</option>
        <option value="local_dropbox">Route: Local + Dropbox</option>
        <option value="local_google">Route: Local + Google</option>
        <option value="off">Route: Off today</option>
      </select>
    </div>

    <!-- Connection Status -->
    <div class="status-bar" id="statusBar">
      <span class="status-dot" id="connectionDot"></span>
      <span class="status-text" id="connectionText">Connecting...</span>
      <span class="word-count" id="wordCount"></span>
      <span class="archive-badge" id="archiveStatus">Archive: idle</span>
    </div>
  </div>

  <script src="vault.js"></script>
  <script src="settings.js"></script>
  <script src="app.js"></script>
</body>

</html>